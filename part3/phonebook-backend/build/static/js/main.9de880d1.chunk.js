(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(19),c=n.n(a),u=n(20),o=n(10),s=n(1),i=n.n(s),l=n(4),f=n(5),b=n(0),p=function(e){var t=e.person,n=e.onDelete;return Object(b.jsxs)("li",{children:[t.name," - ",t.number," ",Object(b.jsx)("button",{onClick:function(){return n(t.id)},children:"delete"})]})},j=function(e){var t=e.list,n=e.onDelete;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)("ul",{children:t.map((function(e){return Object(b.jsx)(p,{person:e,onDelete:n},e.id)}))})]})},d=function(e){var t=e.formSubmit,n=e.newName,r=e.nameValueChange,a=e.newNumber,c=e.numberValueChange;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Add a New"}),Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:n,onChange:r})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:a,onChange:c})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})]})};var h=function(e){var t=e.inputValue,n=e.handleInputChange;return Object(b.jsxs)("div",{children:["Filter Numbers -"," ",Object(b.jsx)("input",{value:t,onChange:n})]})},m=n(7),v=n.n(m),O="/api/persons",x=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(O,t);case 2:return n=e.sent,e.abrupt("return",n.then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete(O+"/"+t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={getAll:x,create:w,update:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(O,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteRecord:k};var y=function(e){var t=e.message;return null===t?null:Object(b.jsx)("div",{className:"error",children:t})};var C=function(e){var t=e.message;return null===t?null:Object(b.jsx)("div",{className:"information",children:t})},N=(n(45),function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(f.a)(c,2),p=s[0],m=s[1],v=Object(r.useState)(""),O=Object(f.a)(v,2),x=O[0],w=O[1],k=Object(r.useState)(""),N=Object(f.a)(k,2),S=N[0],D=N[1],V=Object(r.useState)(null),T=Object(f.a)(V,2),A=T[0],I=T[1],E=Object(r.useState)(null),L=Object(f.a)(E,2),F=L[0],J=L[1];Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.getAll();case 3:t=e.sent,a(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),I("Error in retrieving data from the server"),setTimeout((function(){I(null)}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var R=function(){var e=Object(l.a)(i.a.mark((function e(t,r){var c,u,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.find((function(e){return e.name===t})),u=Object(o.a)(Object(o.a)({},c),{},{number:r}),e.prev=2,e.next=5,g.update(u.id,u);case 5:s=e.sent,console.log(s),a(n.map((function(e){return e.name===t?s:e}))),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),I("Information of ".concat(t," has already been removed from the server")),a(n.filter((function(e){return e!==c}))),setTimeout((function(){I(null)}),3e3);case 15:m(""),w("");case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r={name:p,number:x},!n.some((function(e){return e.name===p}))){e.next=7;break}if(!window.confirm("".concat(p," already in the phonebook, do you want to replace the old number with the new one ?"))){e.next=6;break}return R(p,x),e.abrupt("return");case 6:return e.abrupt("return");case 7:return e.prev=7,e.next=10,g.create(r);case 10:c=e.sent,a(n.concat(c)),J("Added ".concat(p," to the phonebook!")),setTimeout((function(){J(null)}),3e3),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(7),u=e.t0.response,I(u.data.error),setTimeout((function(){I(null)}),5e3);case 21:m(""),w("");case 23:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.find((function(e){return e.id===t})),!window.confirm("Do you really want to delete ".concat(r.name," ?"))){e.next=12;break}return e.prev=2,e.next=5,g.deleteRecord(t);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),I("Looks like the record is already removed from the server"),setTimeout((function(){I(null)}),5e3);case 11:a(n.filter((function(e){return e.id!==t})));case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(C,{message:F}),Object(b.jsx)(y,{message:A}),Object(b.jsx)(h,{inputValue:S,handleInputChange:function(e){D(e.target.value)}}),Object(b.jsx)(d,{formSubmit:B,newName:p,newNumber:x,nameValueChange:function(e){m(e.target.value)},numberValueChange:function(e){w(e.target.value)}}),Object(b.jsx)(j,{list:""===S?n:Object(u.a)(n).filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})),onDelete:P})]})});c.a.render(Object(b.jsx)(N,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.9de880d1.chunk.js.map