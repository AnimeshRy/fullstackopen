{"version":3,"sources":["components/Person.js","components/List.js","components/PersonForm.js","components/Filter.js","services/Numbers.js","components/Notification.js","components/Information.js","App.js","index.js"],"names":["Person","person","onDelete","name","number","onClick","id","List","list","map","item","PersonForm","props","formSubmit","newName","nameValueChange","newNumber","numberValueChange","onSubmit","value","onChange","type","Filter","inputValue","handleInputChange","baseUrl","getAll","a","axios","get","request","data","create","newObject","post","then","response","deleteRecord","delete","personService","update","put","Notification","message","className","Information","App","useState","persons","setPersons","setNewName","setNewNumber","searchPerson","setSearchPerson","errorMessage","seterrorMessage","informationMessage","setinformationMessage","useEffect","setTimeout","fetchData","updateNumber","find","updatedPerson","returnedRecord","console","log","filter","pp","addPerson","event","preventDefault","newObj","some","window","confirm","concat","error","deletePerson","tobeDeleted","n","e","target","toLowerCase","includes","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9de880d1.chunk.js","sourcesContent":["import React from 'react';\n\nconst Person = ({ person, onDelete }) => {\n  return (\n    <li>\n      {person.name} - {person.number}{' '}\n      <button onClick={() => onDelete(person.id)}>delete</button>\n    </li>\n  );\n};\n\nexport default Person;\n","import React from 'react';\nimport Person from './Person';\n\nconst List = ({ list, onDelete }) => {\n  return (\n    <div>\n      <h2>Numbers</h2>\n      <ul>\n        {list.map((item) => (\n          <Person key={item.id} person={item} onDelete={onDelete}></Person>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default List;\n","import React from 'react';\n\nconst PersonForm = (props) => {\n  let {\n    formSubmit,\n    newName,\n    nameValueChange,\n    newNumber,\n    numberValueChange,\n  } = props;\n  return (\n    <>\n      <h2>Add a New</h2>\n      <form onSubmit={formSubmit}>\n        <div>\n          name: <input value={newName} onChange={nameValueChange} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={numberValueChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nfunction Filter({ inputValue, handleInputChange }) {\n  return (\n    <div>\n      Filter Numbers -{' '}\n      <input value={inputValue} onChange={handleInputChange}></input>\n    </div>\n  );\n}\n\nexport default Filter;\n","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = async () => {\n  const request = await axios.get(baseUrl);\n  return request.data;\n};\n\nconst create = async (newObject) => {\n  const request = await axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deleteRecord = async (id) => {\n  await axios.delete(baseUrl + '/' + id);\n};\n\nconst update = async (id, newObject) => {\n  const request = await axios.put(`${baseUrl}/${id}`, newObject);\n  return request.data;\n};\n\nconst personService = {\n  getAll,\n  create,\n  update,\n  deleteRecord,\n};\n// export default { getAll, create }\n\nexport default personService;\n","import React from 'react';\n\nfunction Notification({ message }) {\n  if (message === null) return null;\n  return <div className={'error'}>{message}</div>;\n}\n\nexport default Notification;\n","import React from 'react';\n\nfunction Information({ message }) {\n  if (message === null) return null;\n  return <div className={'information'}>{message}</div>;\n}\n\nexport default Information;\n","import React, { useState, useEffect } from 'react';\nimport List from './components/List';\nimport PersonForm from './components/PersonForm';\nimport Filter from './components/Filter';\nimport personService from './services/Numbers';\nimport Notification from './components/Notification';\nimport Information from './components/Information';\nimport './App.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchPerson, setSearchPerson] = useState('');\n  const [errorMessage, seterrorMessage] = useState(null);\n  const [informationMessage, setinformationMessage] = useState(null);\n\n  // only run on first render\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await personService.getAll();\n        setPersons(response);\n      } catch (error) {\n        seterrorMessage('Error in retrieving data from the server');\n        setTimeout(() => {\n          seterrorMessage(null);\n        }, 5000);\n      }\n    }\n    fetchData();\n  }, []);\n\n  const updateNumber = async (name, newNumber) => {\n    const person = persons.find((person) => person.name === name);\n    const updatedPerson = { ...person, number: newNumber };\n    try {\n      const returnedRecord = await personService.update(\n        updatedPerson.id,\n        updatedPerson\n      );\n      console.log(returnedRecord);\n      setPersons(\n        persons.map((person) =>\n          person.name === name ? returnedRecord : person\n        )\n      );\n    } catch (error) {\n      seterrorMessage(\n        `Information of ${name} has already been removed from the server`\n      );\n      setPersons(persons.filter((pp) => pp !== person));\n      setTimeout(() => {\n        seterrorMessage(null);\n      }, 3000);\n    }\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const addPerson = async (event) => {\n    event.preventDefault();\n    const newObj = {\n      name: newName,\n      number: newNumber,\n    };\n    if (persons.some((person) => person.name === newName)) {\n      if (\n        window.confirm(\n          `${newName} already in the phonebook, do you want to replace the old number with the new one ?`\n        )\n      ) {\n        updateNumber(newName, newNumber);\n        return;\n      }\n      return;\n    }\n    try {\n      const returnedRecord = await personService.create(newObj);\n      setPersons(persons.concat(returnedRecord));\n      setinformationMessage(`Added ${newName} to the phonebook!`);\n      setTimeout(() => {\n        setinformationMessage(null);\n      }, 3000);\n    } catch ({ response }) {\n      // Validation Error\n      seterrorMessage(response.data.error);\n      setTimeout(() => {\n        seterrorMessage(null);\n      }, 5000);\n    }\n    setNewName('');\n    setNewNumber('');\n  };\n  const deletePerson = async (id) => {\n    const tobeDeleted = persons.find((n) => n.id === id);\n    if (window.confirm(`Do you really want to delete ${tobeDeleted.name} ?`)) {\n      try {\n        await personService.deleteRecord(id);\n      } catch (error) {\n        seterrorMessage(\n          'Looks like the record is already removed from the server'\n        );\n        setTimeout(() => {\n          seterrorMessage(null);\n        }, 5000);\n      }\n      setPersons(persons.filter((person) => person.id !== id));\n    }\n  };\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilterChange = (e) => {\n    setSearchPerson(e.target.value);\n  };\n\n  const filterListValue = () => {\n    if (searchPerson === '') {\n      return persons;\n    }\n    return [...persons].filter((person) =>\n      person.name.toLowerCase().includes(searchPerson.toLowerCase())\n    );\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Information message={informationMessage}></Information>\n      <Notification message={errorMessage}></Notification>\n      <Filter\n        inputValue={searchPerson}\n        handleInputChange={handleFilterChange}\n      ></Filter>\n\n      <PersonForm\n        formSubmit={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        nameValueChange={handleNameChange}\n        numberValueChange={handleNumberChange}\n      ></PersonForm>\n\n      <List list={filterListValue()} onDelete={deletePerson}></List>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}